!function(e){function t(t){for(var n,s,c=t[0],l=t[1],i=t[2],u=0,p=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);p.length;)p.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==o[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={2:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var d=l;r.push([34,0,3]),a()}({3:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var n=a(4),o=a.n(n);a(11),a(12);o.a.initializeApp({apiKey:"AIzaSyCo5PES1-XQ9rp7zq9jssnm212PRehmlK4",authDomain:"parse-upwork.firebaseapp.com",databaseURL:"https://parse-upwork.firebaseio.com",projectId:"parse-upwork",storageBucket:"parse-upwork.appspot.com",messagingSenderId:"1077528839335",appId:"1:1077528839335:web:b95f8803a79f09927a8782",measurementId:"G-L0VM9RWBH6"});const r=o.a.database(),s=o.a.auth()},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(3);const o=async()=>{try{const e=localStorage.getItem("token");if(e){const t=await fetch(`https://parse-upwork.firebaseio.com/users/${e}.json`),a=await t.json();return document.querySelector(".loader-container").style.display="none",a}}catch(e){throw new Error(e)}};a(32),a(33);var r=a(14);const s=e=>{let t=null,a=null,n=null,o=null;e.forEach(e=>{new r.a.create(e,{group:"name",sort:!0,handle:".cards-container",dragClass:"swipe-class",animation:250,ghostClass:"blue-background-class",onStart:function(e){t=e.item.getAttribute("value"),n=e.item.parentNode.getAttribute("value")},onEnd:function(e){a=e.item.getAttribute("value"),o=e.item.parentNode.getAttribute("value"),e.pullMode||a&&o&&t&&t&&(async(e,t,a)=>{try{const n=localStorage.getItem("token");if(n){const o=document.querySelector(".loader-container");o.style.display="flex";const r=await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${e}/tasks/${t}/.json`),s=await r.json(),c=await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${e}/tasks/${t}/.json`,{method:"PUT",body:JSON.stringify({...s,positionNumber:0===a?0:a})});o.style.display="none",c.status}}catch(e){throw document.querySelector(".loader-container").style.display="flex",new Error(e)}})(o,a,e.newIndex)},onAdd:function(e){a=e.item.getAttribute("value"),o=e.item.parentNode.getAttribute("value"),a&&o&&t&&t&&(async(e,t,a,n,o)=>{try{const n=localStorage.getItem("token");if(n){document.querySelector(".loader-container").style.display="flex";const r=await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${t}/tasks/.json`),s=await r.json(),c=await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${e}/tasks/${a}.json`),l=await c.json();await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${e}/tasks/${a}/.json`,{method:"DELETE"});(await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${t}/tasks/.json`,{method:"PUT",body:JSON.stringify({...s,[(new Date).getTime()]:{value:l.value,cardId:(new Date).getTime(),positionNumber:0===o?0:o-1}})})).status}}catch(e){throw document.querySelector(".loader-container").style.display="none",new Error(e)}})(n,o,t,0,e.newIndex)}})})},c=(e,t,a)=>`\n    <div class='add-new-column'>\n    <input class='add-column-input' placeholder=${e}>\n    <div class='select-block'>\n      <button class='create create-card save-title save-edit-card'>${t}</button>\n      <button class='cancel cancel-card cancel-title cancel-edit-card'>${a}</button>\n    </div>\n  </div>`;class l{constructor(){this.value="",this.tardet="",this.cardValue="",this.addNewBlock=document.querySelector(".add-new-column"),this.addNewInput=document.querySelector(".add-column-input"),this.addNewSpan=document.querySelector(".add-span"),this.selectBlock=document.querySelector(".select-block"),this.createBtn=document.querySelector(".create"),this.cancelBtn=document.querySelector(".cancel"),this.column=document.querySelector(".column"),this.createCardBtn="",this.cancelCardBtn="",this.editTitleBtn=""}static createChildNode(e){const t=document.createElement(e.name);return e.className&&e.className.forEach(e=>{t.classList.add(e)}),e.text&&(t.innerHTML=e.text),(e.columnId||0===e.columnId)&&t.setAttribute("value",e.columnId),t}openInputToCreate(){this.addNewBlock.addEventListener("click",e=>{this.addNewInput.style.display="flex",this.addNewInput.focus(),this.addNewSpan.style.display="none",this.selectBlock.style.display="flex"})}onChangeInput(){this.addNewInput.addEventListener("change",e=>{this.value=e.target.value})}addCard(){const e=document.querySelectorAll(".add-card");e.forEach(e=>{e.addEventListener("click",t=>{this.tardet=t.target,e.innerHTML=c("Додати","Додати","Відмінити"),this.createCardBtn=document.querySelector(".create-card"),this.cancelCardBtn=document.querySelector(".cancel-card"),e.children[0].childNodes[1].focus(),e.classList.remove("before-class"),this.toggleCard(e)})}),document.addEventListener("click",t=>{e.forEach(e=>{e!==this.tardet&&(e.className.includes("before-class")||(e.innerHTML="Додати карточку",e.classList.add("before-class")))})})}editTitle(){this.editTitleBtn=document.querySelectorAll(".column-title-edit"),this.editTitleBtn.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),e.parentNode.innerHTML=c("Змінити","Зберегти","Відмінити"),document.querySelector(".add-column-input").focus(),this.toggleTitle(e)})})}deleteColumn(){document.querySelectorAll(".column-title-delete").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();confirm("Бажаєте видалити колонку?")&&((async e=>{try{const t=localStorage.getItem("token");if(t){const a=document.querySelector(".loader-container");a.style.display="flex";const n=await fetch(`https://parse-upwork.firebaseio.com/users/${t}/columns/${e}/.json`,{method:"DELETE"});a.style.display="none",n.status}}catch(e){throw document.querySelector(".loader-container").style.display="none",new Error(e)}})(e.parentNode.parentNode.getAttribute("value")),this.renderColumns())})})}editCard(){document.querySelectorAll(".card-title-edit").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),e.parentNode.innerHTML=c("Змінити","Зберегти","Відмінити"),document.querySelector(".add-column-input").focus(),this.toggleEditCard()})})}deleteCard(){document.querySelectorAll(".card-title-delete").forEach(e=>{e.addEventListener("click",t=>{confirm("Бажаєте видалити карточку?")&&((async(e,t)=>{try{const a=localStorage.getItem("token");if(a){const n=document.querySelector(".loader-container");n.style.display="flex";const o=await fetch(`https://parse-upwork.firebaseio.com/users/${a}/columns/${e}/tasks/${t}/.json`,{method:"DELETE"});n.style.display="none",o.status}}catch(e){throw document.querySelector(".loader-container").style.display="none",new Error(e)}})(e.parentNode.parentNode.getAttribute("value"),e.parentNode.getAttribute("value")),this.renderColumns())})})}toggleColumn(){this.createBtn.addEventListener("click",e=>{e.stopPropagation(),""!==this.addNewInput.value&&(this.addNewInput.style.display="none",this.addNewInput.value="",this.addNewSpan.style.display="flex",this.selectBlock.style.display="none",(async e=>{try{const t=localStorage.getItem("token");if(t){const a=document.querySelector(".loader-container");a.style.display="flex";const n=await fetch(`https://parse-upwork.firebaseio.com/users/${t}/.json`),o=await n.json(),r=await fetch(`https://parse-upwork.firebaseio.com/users/${t}/.json`,{method:"PUT",body:JSON.stringify({...o,columns:{...o.columns,[(new Date).getTime()]:{columnName:e,created:(new Date).getTime(),columnId:(new Date).getTime()}}})}),s=await r.json();a.style.display="none"}}catch(e){throw document.querySelector(".loader-container").style.display="none",new Error(e)}})(this.value))}),this.cancelBtn.addEventListener("click",e=>{e.stopPropagation(),this.addNewInput.style.display="none",this.addNewInput.value="",this.addNewSpan.style.display="flex",this.selectBlock.style.display="none"})}toggleEditCard(){const e=document.querySelector(".save-title"),t=document.querySelector(".cancel-title");e.addEventListener("click",t=>{t.stopPropagation(t);const a=e.parentNode.parentNode.childNodes[1].value;if(a){const t=e.parentNode.parentNode.parentNode.getAttribute("value");if(t){(async(e,t,a)=>{try{const n=localStorage.getItem("token");if(n){const o=await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${e}/tasks/${t}/.json`),r=await o.json(),s=await fetch(`https://parse-upwork.firebaseio.com/users/${n}/columns/${e}/tasks/${t}/.json`,{method:"PUT",body:JSON.stringify({...r,value:a})});await s.json()}}catch(e){throw new Error(e)}})(e.parentNode.parentNode.parentNode.parentNode.getAttribute("value"),t,a)}}}),t.addEventListener("click",e=>{e.stopPropagation(e),this.renderColumns()})}toggleTitle(){const e=document.querySelector(".save-title"),t=document.querySelector(".cancel-title");e.addEventListener("click",t=>{t.stopPropagation(t);const a=e.parentNode.parentNode.childNodes[1].value;if(a){(async(e,t)=>{try{const a=localStorage.getItem("token");if(a){console.log(t);const n=await fetch(`https://parse-upwork.firebaseio.com/users/${a}/.json`),o=await n.json(),r=await fetch(`https://parse-upwork.firebaseio.com/users/${a}/.json`,{method:"PUT",body:JSON.stringify({...o,columns:{...o.columns,[e]:{...o.columns[e],columnName:t}}})});await r.json()}}catch(e){throw new Error(e)}})(e.parentNode.parentNode.parentNode.parentNode.getAttribute("value"),a)}}),t.addEventListener("click",e=>{e.stopPropagation(e),this.renderColumns()})}toggleCard(e){this.createCardBtn.addEventListener("click",t=>{if(t.stopPropagation(),this.cardValue=e.children[0].childNodes[1].value,""!==this.cardValue){e.innerHTML="Додати карточку";(async(e,t)=>{try{const a=localStorage.getItem("token");if(a){const n=document.querySelector(".loader-container");n.style.display="flex";const o=await fetch(`https://parse-upwork.firebaseio.com/users/${a}/.json`),r=await o.json(),s=await fetch(`https://parse-upwork.firebaseio.com/users/${a}/.json`,{method:"PUT",body:JSON.stringify({...r,columns:{...r.columns,[e]:{...r.columns[e],tasks:{...r.columns[e].tasks||{},[(new Date).getTime()]:{value:t,cardId:(new Date).getTime(),positionNumber:r.columns[e].tasks?Object.values(r.columns[e].tasks).length:0}}}}})}),c=await s.json();n.style.display="none"}}catch(e){throw document.querySelector(".loader-container").style.display="none",new Error(e)}})(e.parentNode.getAttribute("value"),this.cardValue)}}),this.cancelCardBtn.addEventListener("click",t=>{t.stopPropagation(),e.classList.add("before-class"),e.innerHTML="Додати карточку"})}renderCard(e,t){((e,t)=>{const a=l.createChildNode({name:"div",columnId:e.columnId,className:["cards-container"]});if(e.tasks&&e.tasks){Object.values(e.tasks).sort((e,t)=>e.positionNumber-t.positionNumber).forEach(e=>{if(e&&e.cardId){const n=l.createChildNode({name:"p",className:["card-item"],columnId:e.cardId});n.appendChild(l.createChildNode({name:"span",className:["card-text"],text:e.value})),n.appendChild(l.createChildNode({name:"span",className:["card-title-edit"]})),n.appendChild(l.createChildNode({name:"span",className:["card-title-delete"]})),a.appendChild(n),t.appendChild(a)}})}else t.appendChild(a)})(e,t)}renderColumns(){(async()=>{const e=new l,t=await o();if(t&&t.columns){const a=Object.values(t.columns);e.column.innerHTML="",a.forEach(t=>{const a=l.createChildNode({name:"div",columnId:t.columnId}),n=l.createChildNode({name:"div",className:["card-title"]});n.appendChild(l.createChildNode({name:"span",className:["card-title-span"],text:t.columnName})),n.appendChild(l.createChildNode({name:"span",className:["column-title-edit"]})),n.appendChild(l.createChildNode({name:"span",className:["column-title-delete"]})),a.appendChild(n),e.renderCard(t,a),a.appendChild(l.createChildNode({name:"div",className:["add-card","before-class"],text:"Додати карточку"})),e.column.appendChild(a)}),e.addCard(),e.editCard(),e.deleteCard(),e.editTitle(),e.deleteColumn(),s(document.querySelectorAll(".cards-container"));document.querySelector(".loader-container").style.display="none"}else e.column.innerHTML=""})()}}var i=a(7);if(localStorage.getItem("token")){o();const e=new l;e.renderColumns(),e.openInputToCreate(),e.toggleColumn(),e.onChangeInput();n.b.ref("users").on("child_changed",(function(t){t&&t.val()&&e.renderColumns()}))}document.getElementById("logOut").addEventListener("click",e=>{Object(i.b)().then(e=>{window.open("./index.html","_self"),localStorage.removeItem("token")})})},7:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a(3);const o=async(e="test@gmail.com",t="123456")=>{try{return(await n.a.signInWithEmailAndPassword(e,t)).user}catch(e){return e}},r=async(e="test@gmail.com",t="123456",a="name")=>{try{const o=await n.a.createUserWithEmailAndPassword(e,t),r=await fetch(`https://parse-upwork.firebaseio.com/users/${o.user.uid}/.json`,{method:"PUT",body:JSON.stringify({email:e,password:t,name:a,id:o.user.uid,created:new Date})}),s=await r.json();return localStorage.setItem("token",s.id),window.open("trello.html","_self"),r}catch(e){return e}},s=async()=>{try{await n.a.signOut();return"success logout"}catch(e){return e}}}});